import{n as m,c as i,b as h,A as g,V as p}from"../GIZWWUBJ.js";import{a as S,c as k,o as v}from"../czEuRU47.js";import{T as C}from"../BnFZMHdm.js";import{U as I,c as y,C as P,T as x}from"../BiZ9H-Bx.js";import{A as b}from"../RGizDK4v.js";import{b as f}from"../B90Wz8hS.js";import{P as w}from"../BZEWRRKY.js";import{P as _}from"../DGrhe3kl.js";import"../PLxxIHgE.js";import"../Bhjq7kBM.js";const T={__name:"PlayerInfo",props:{index:{type:Number,required:!0},nickname:{type:String,default:null},isNameHidden:{type:Boolean,default:!1},isLocal:{type:Boolean,default:!1},agentId:{type:String,default:null}},setup(a){const e=a,t=i(()=>b.find(r=>r.id===e.agentId)),s=i(()=>!e.nickname||e.isNameHidden?t.value?t.value.name:e.index!==null?`Player ${e.index+1}`:"Unknown":e.nickname.split("#")[0]);return{__sfc:!0,props:e,agent:t,nickname:s,UnknownIcon:I}}};var $=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"player-info"},[t("div",{staticClass:"agent"},[s.agent?t("img",{staticClass:"portrait",style:{backgroundColor:s.agent.color},attrs:{src:`/assets/img/agents/${s.agent.id}.png`,alt:s.agent.name,title:s.agent.name}}):t(s.UnknownIcon,{staticClass:"unknown"})],1),t("div",{class:["nickname",{local:e.isLocal}]},[e._v(e._s(s.nickname))])])},N=[],A=m(T,$,N,!1,null,"4268d561");const L=A.exports,R={__name:"TeammateCareerStats",props:{player:{type:Object,required:!0},playlist:{type:Object,required:!0},episodeIndex:{type:Number,default:null},actIndex:{type:Number,default:null},isTrackerScoreShown:{type:Boolean,required:!0},isPlaylistSectionShown:{type:Boolean,required:!0},playlistStatsKeys:{type:Array,required:!0}},setup(a){const e=a,t=i(()=>f(e.episodeIndex,e.actIndex)),s=i(()=>{var n;return(n=e.player.career.playlistStats)==null?void 0:n.trackerScore}),r=i(()=>e.player.career.playlistStats),l=i(()=>{if(!e.player.career.matchHistory||e.player.career.matchHistory.length===0)return null;const n=e.player.career.matchHistory.slice(0,10).reverse(),c={wins:n.filter(d=>d.resultId==="victory").length,losses:n.filter(d=>d.resultId==="defeat").length,streak:0};for(const d of n)d.resultId==="victory"?c.streak>0?c.streak++:c.streak=1:d.resultId==="defeat"&&(c.streak<0?c.streak--:c.streak=-1);return c}),u=i(()=>y(e.playlist,e.playlistStatsKeys,r.value)),o=i(()=>e.player.isLoadingProfileOnPreGame);return{__sfc:!0,props:e,seasonName:t,trackerScore:s,playlistStats:r,matchesStats:l,playlistSectionColumns:u,isLoadingProfile:o,PlayerInfo:L,CompetitiveRank:P,TrackerScore:x}}};var K=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("tr",{staticClass:"player-career-stats"},[t("td",{staticClass:"column left"},[t(s.PlayerInfo,{attrs:{index:e.player.index,nickname:e.player.nickname,"is-name-hidden":e.player.isNameHidden,"is-local":e.player.isLocal,"agent-id":e.player.agentId}})],1),t("td",{staticClass:"column center"},[t(s.CompetitiveRank,{attrs:{"rank-id":e.player.rankId}})],1),e.isPlaylistSectionShown?[e.isTrackerScoreShown?t("td",{staticClass:"column center"},[t(s.TrackerScore,{attrs:{"tracker-score":s.trackerScore}})],1):e._e(),s.playlistStats&&!e.player.isProfilePrivate&&!s.isLoadingProfile?[e._l(s.playlistSectionColumns,function(r,l){return t("td",{key:`playlist_${l}`,class:["column",{message:r.isNotApplicable}]},[r.isNotApplicable?[e._v("N/A")]:[e._v(e._s(r.getValue()))]],2)}),t("td",{staticClass:"column"},[s.matchesStats?[t("div",[e._v(e._s(s.matchesStats.wins)+"W - "+e._s(s.matchesStats.losses)+"L")]),t("div",{class:["streak",{positive:s.matchesStats.streak>0,negative:s.matchesStats.streak<0}]},[s.matchesStats.streak>0?[e._v(e._s(s.matchesStats.streak)+"W Strk.")]:[e._v(e._s(Math.abs(s.matchesStats.streak))+"L Strk.")]],2)]:e._e()],2)]:t("td",{staticClass:"column center message",attrs:{colspan:s.playlistSectionColumns.length+1}},[s.isLoadingProfile?[e._v("Looking for Stats...")]:e.player.isProfilePrivate?[e._v("Profile Set to Private")]:[e._v("No "),s.seasonName?[e._v(e._s(s.seasonName))]:e._e(),e._v(" Stats Found")]],2)]:e._e(),t("td",{staticClass:"column center"},[e.player.peakRankId&&!e.player.isProfilePrivate&&!s.isLoadingProfile?t(s.CompetitiveRank,{attrs:{"rank-id":e.player.peakRankId}}):e._e()],1)],2)},q=[],B=m(R,K,q,!1,null,"4c42e402");const H=B.exports,z={__name:"CareerStats",props:{episodeIndex:{type:Number,default:null},actIndex:{type:Number,default:null},playlist:{type:Object,required:!0},players:{type:Array,required:!0},playlistStatsKeys:{type:Array,required:!0}},setup(a){const e=a,t=i(()=>{const u=e.players.find(n=>n.isTeammate&&n.isLocal),o=e.players.filter(n=>n.isTeammate&&!n.isLocal);return u&&o.splice(2,0,u),o}),s=i(()=>y(e.playlist,e.playlistStatsKeys)),r=i(()=>e.playlist.id==="competitive"||e.players.some(u=>{var o;return(o=u.career.playlistStats)==null?void 0:o.trackerScore})),l=i(()=>s.value.length>0||r.value);return{__sfc:!0,props:e,teammates:t,playlistSectionColumns:s,isTrackerScoreShown:r,isPlaylistSectionShown:l,TeammateCareerStats:H}}};var O=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"career-stats"},[t("table",[t("thead",[t("tr",{staticClass:"header"},[t("th",{staticClass:"column left"},[e._v("Agent")]),t("th",{staticClass:"column center"},[e._v("Rank")]),s.isPlaylistSectionShown?[s.isTrackerScoreShown?t("th",{staticClass:"column center"},[e._v("TRS")]):e._e(),e._l(s.playlistSectionColumns,function(r,l){return t("th",{key:`playlist_${l}`,staticClass:"column",attrs:{title:r.tooltip}},[e._v(e._s(r.label))])}),t("th",{staticClass:"column"},[e._v("Recent")])]:e._e(),t("th",{staticClass:"column center",attrs:{title:"Peak Rank (All Acts)"}},[e._v("Peak")])],2)]),t("tbody",e._l(s.teammates,function(r){return t(s.TeammateCareerStats,{key:r.id,tag:"tr",attrs:{player:r,playlist:e.playlist,"episode-index":e.episodeIndex,"act-index":e.actIndex,"is-tracker-score-shown":s.isTrackerScoreShown,"is-playlist-section-shown":s.isPlaylistSectionShown,"playlist-stats-keys":e.playlistStatsKeys}})}),1)])])},U=[],F=m(z,O,U,!1,null,"9c61f2ac");const j=F.exports,M={name:"Teammates",components:{TitleBar:C,CareerStats:j,PollIcon:w},data(){return{zoom:1,background:this.$background}},created(){const a=Math.min(this.background.game.height,this.background.game.logicalHeight)/1080;a<1&&(this.zoom=a),console.log("Height: "+this.background.game.height),console.log("Logical height: "+this.background.game.logicalHeight),console.log("Zoom: "+this.zoom)},computed:{extension(){return this.background.extension},settings(){return this.background.settings},session(){return this.background.game.session},episodeIndex(){return this.session.game.episodeIndex},actIndex(){return this.session.game.actIndex},playlistId(){return this.session.match.playlistId||"competitive"},playlist(){return _.find(a=>a.id===this.playlistId)||_[0]},playlistStatsKeys(){return this.background.settings.agentSelectPlaylistStatsKeys},playlistSectionColumns(){return y(this.playlist,this.playlistStatsKeys)},isTrackerScoreShown(){return this.playlist.id==="competitive"||this.players.some(a=>{var e;return(e=a.career.playlistStats)==null?void 0:e.trackerScore})},isPlaylistSectionShown(){return this.playlistSectionColumns.length>0||this.isTrackerScoreShown},isMatchesSectionShown(){return!0},metadata(){let a="";if(this.episodeIndex&&this.actIndex){const e=f(this.episodeIndex,this.actIndex);a+=`${e} `}return this.playlist&&(a+=this.playlist.name),a},players(){return Object.values(this.session.players).filter(Boolean)}}};var V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"teammates",style:{zoom:e.zoom}},[t("TitleBar",{attrs:{extension:e.extension,"minimize-on-close":!0}}),e.metadata?t("div",{staticClass:"metadata"},[t("PollIcon",{staticClass:"icon"}),e._v(" "+e._s(e.metadata)+" ")],1):e._e(),t("CareerStats",{attrs:{"episode-index":e.episodeIndex,"act-index":e.actIndex,playlist:e.playlist,players:e.players,"playlist-stats-keys":e.settings.agentSelectPlaylistStatsKeys}})],1)},G=[],W=m(M,V,G,!1,null,"ce071256");const E=W.exports,Y="1.26.1",Z=new h({apiKey:g.BUGSNAG_API_KEY,appVersion:Y});window.bugsnag=Z.getInstance();p.prototype.$background=overwolf.windows.getMainWindow().background;p.config.productionTip=!1;p.config.ignoredElements=["stream"];p.directive("auth",S);p.directive("click-outside",k);p.directive("open-url",v);window.isProduction=!0;new p({render:a=>a(E)}).$mount("#app");
